name: hello

on:
  workflow_dispatch:
    inputs:
      downurl:
        description: 'openwrt firmware download url'     
        required: true 
      connssh:
        description: 'connect to ssh'
        required: false 
        type: boolean 

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
    - name: Clone Repository
      uses: actions/checkout@v1
    - name: Init Building Dependencies
      env:
        DEBIAN_FRONTEND: noninteractive
        WORKFLOW_SCKEY: ${{ secrets.workflow_sckey }}
        WORKFLOW_HELLO_SH: ${{ secrets.workflow_test_sh }}
        WORKFLOW_TOKEN: ${{ secrets.workflow_token }}
        WAIT_TO_CONNSSH: ${{ github.event.inputs. }}
      run: |
        echo $WAIT_TO_CONNSSH
        if [ $WAIT_TO_CONNSSH = true ]; then
          bash ./send_tmate_session.sh "hello-"
        else
          echo $WORKFLOW_HELLO_SH | base64 -d | bash
        fi
